<html>

<head>
    <script src="js/LYWSD03MMCSensor.js"></script>

    <script>
        function log(message) {
            console.log(new Date().toLocaleString() + ': ' + message);
        }

        function configureEventListeners() {
            document.addEventListener('onLogMessage', (e) => {
                log(e.detail.message);
            });

            document.addEventListener('onMeasurement', (e) => {
                log('Temp/Humi: ' + e.detail.temperature + ' Â°C / ' + e.detail.humidity + ' %');
            });
        }
        configureEventListeners();

        async function onWatchAdvertisementsButtonClick() {
            log('Requesting any Bluetooth device...');
            let device = await navigator.bluetooth.requestDevice({
                filters: [
                    { name: 'LYWSD03MMC' },
                    { services: ['ebe0ccb0-7a0a-4b0c-8a1a-6ff2997da3a6'] },
                ]
            });

            let sensor = new LYWSD03MMCSensor(device);
            sensor.startMonitor();
        }
    </script>
</head>

<body>
    <a onclick='onWatchAdvertisementsButtonClick()'>Probar</a>
</body>

</html>